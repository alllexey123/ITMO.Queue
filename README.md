<h1 align="center">ITMO.Queue</h1>

<p align="center">
  <strong>Телеграм-бот для управления очередями на сдачу лабораторных работ в ИТМО</strong>
</p>

**ITMO.Queue** - это Телеграм-бот, разработанный для упрощения процесса организации и управления очередями на сдачу лабораторных работ в университете ИТМО.

[Ссылка](https://t.me/itmo_q_bot) на оригинального бота, открытого для всех.

## Основные возможности

*   **Создание и управление предметами:** Администраторы групп могут добавлять и редактировать предметы, по которым будут создаваться лабораторные работы.
*   **Организация очередей:** Для каждого предмета можно создавать неограниченное количество лабораторных работ (очередей).
*   **Гибкая система записи:** Студенты могут записываться в очередь, указывая номер попытки сдачи.
*   **Просмотр очередей:** 
    *   **В Телеграме:** Бот предоставляет удобный интерфейс для просмотра активных очередей, как в личных сообщениях, так и в групповых чатах.
    *   **Веб-интерфейс:** Для каждой очереди генерируется уникальная веб-страница, на которой можно в реальном времени отслеживать состояние очереди без необходимости взаимодействия с ботом.
*   **Управление статусом:** Студенты могут самостоятельно отмечать, что сдали лабораторную работу, или выходить из очереди.
*   **Персонализация:** Пользователи могут устанавливать себе никнеймы для более удобного отображения в очередях.
*   **Администрирование в группах:** Права на создание и управление очередями автоматически предоставляются администраторам телеграм-чата, а также пользователю, добавившему бота в группу.

## Технологии

*   **Бэкенд:** Kotlin, Spring Boot, Spring Data JPA
*   **База данных:** MariaDB (или любая другая SQL-совместимая СУБД)
*   **Telegram API:** [TelegramBots](https://github.com/rubenlagus/TelegramBots)
*   **Фронтенд (веб-страницы очередей):** Thymeleaf

## Установка и запуск

### Предварительные требования

*   Java Development Kit (JDK) 21 или выше
*   Настроенный сервер базы данных (например, MariaDB)
*   Токен для Телеграм-бота (можно получить у [@BotFather](https://t.me/BotFather))

### Настройка

1.  **Склонируйте репозиторий:**
    ```bash
    git clone https://github.com/alllexey123/ITMO.Queue.git
    cd ITMO.Queue
    ```

2.  **Настройте переменные окружения:**
    Проект использует переменные окружения для конфигурации.

    *   `DB_URL`: URL для подключения к вашей базе данных.
        *   Пример: `jdbc:mariadb://localhost:3306/itmo_queue`
    *   `DB_USER`: Имя пользователя для доступа к базе данных.
    *   `DB_PASSWORD`: Пароль для доступа к базе данных.
    *   `TG_TOKEN`: Токен вашего Телеграм-бота.
    *   `SELF_ORIGIN`: Публичный URL, по которому будет доступен ваш сервер (для генерации ссылок на веб-страницы очередей).
        *   Пример: `https://mycoolqueueurl.ru`

### Запуск проекта

Проект можно запустить с помощью Gradle:

```bash
./gradlew bootRun
```

## Команды бота

### В групповых чатах (для администраторов)

*   `/new_subject` - Создать новый предмет.
*   `/list_subjects` - Показать список всех предметов с возможностью редактирования и удаления.
*   `/new_lab` - Создать новую лабораторную работу (очередь) для существующего предмета.
*   `/list_labs` - Показать список всех лабораторных работ с возможностью управления очередями.

### В личных сообщениях с ботом

*   `/start` - Начало работы с ботом.
*   `/set_name` - Установить или изменить свой никнейм.
*   `/list_labs` - Показать список всех очередей, в которых вы состоите.
